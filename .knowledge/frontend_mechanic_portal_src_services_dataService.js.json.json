{"is_source_file": true, "format": "JavaScript", "description": "This file provides a data service module for a mechanic request management system, supporting both local storage and Supabase backend interactions. It includes functions for user authentication, request creation, assignment, status updates, profile management, and utility functions for handling vehicle and contact data normalization.", "external_files": ["@supabase/supabase-js", "./statusUtils"], "external_methods": ["createClient"], "published": ["dataService"], "classes": [], "methods": [{"name": "createRequest", "description": "Creates a new mechanic request, either in local storage or via Supabase, with vehicle and contact info."}, {"name": "login", "description": "Authenticates a user via Supabase or local storage, returning user info and role."}, {"name": "logout", "description": "Logs out the current user, clearing session data."}, {"name": "getCurrentUser", "description": "Retrieves the current authenticated user info from Supabase or local storage."}, {"name": "listUnassignedRequests", "description": "Lists requests that are unassigned, from Supabase or local storage."}, {"name": "listMyAssignments", "description": "Lists requests assigned to a mechanic, via Supabase or local storage."}, {"name": "getRequestById", "description": "Fetches a specific request by ID from Supabase or local storage."}, {"name": "acceptRequest", "description": "Assigns a request to a mechanic, updating status and notes, via Supabase or local storage."}, {"name": "updateRequestStatus", "description": "Updates the status of a request, adding a note, via Supabase or local storage."}, {"name": "updateProfile", "description": "Updates a user's profile information in Supabase or local storage."}, {"name": "isSupabaseConfigured", "description": "Checks if the necessary environment variables for Supabase are set."}], "calls": ["createClient", "normalizeStatus", "readJson", "writeJson", "getSupabaseEnv", "getSupabase", "getLocalSession", "setLocalSession", "clearLocalSession", "getLocalUsers", "setLocalUsers", "getLocalRequests", "setLocalRequests", "normalizeVehicle", "normalizeContact", "normalizeRequestRow", "supaGetUserRole", "requireSupabaseUser"], "search-terms": ["dataService", "mechanic requests", "Supabase integration", "local storage fallback", "request assignment", "status updates", "profile management", "vehicle normalization", "contact normalization"], "state": 2, "file_id": 43, "knowledge_revision": 223, "git_revision": "77e1d600e759976a19c575733df1357e8ce8f29f", "revision_history": [{"174": "fa0a1e8e7f94b5e6f4af66ec25c41c5e5cbed10a"}, {"180": "fa0a1e8e7f94b5e6f4af66ec25c41c5e5cbed10a"}, {"181": "8b75e6f13e1d117ffa097fd8788e784d6efc2a44"}, {"182": "34f2c4bbd8f5a79b57263dad0ee55359e37f88ec"}, {"183": "70ade44545bd776f5082ac10b1f7c51845b6c5bc"}, {"184": "e4e9e2db07fdf12c0e37aaefb4cf67e75dee1654"}, {"185": "a809c01bd4375e610cced2c455cbe8565b2c878f"}, {"189": "21a2c6030a5cc19d79138860e56feb0231bbedf4"}, {"223": "77e1d600e759976a19c575733df1357e8ce8f29f"}], "ctags": [], "filename": "frontend_mechanic_portal/src/services/dataService.js", "format-version": 4, "code-base-name": "https://github.com/kavia-common/roadrescue-quickassist-platform-41193-41204.git:kavia-main"}
{"is_source_file": true, "format": "JavaScript", "description": "This file implements a data service module for a mechanic request management system, handling user registration, login, request creation, status updates, and integration with Supabase for backend operations, along with local fallback mechanisms.", "external_files": ["./statusUtils"], "external_methods": ["createClient"], "published": ["dataService"], "classes": [], "methods": [{"name": "registerMechanic({ name, email, password, phone, serviceType })", "description": "Registers a new mechanic user, creating an auth record and profile in the backend.", "scope": "dataService", "scopeKind": "class"}, {"name": "createRequest({ user, vehicle, issueDescription, contact, address, latitude, longitude })", "description": "Creates a new service request, stores in backend, and initializes with a system note.", "scope": "dataService", "scopeKind": "class"}, {"name": "login(email, password)", "description": "Performs user login, supporting both Supabase and local fallback, returning user info and role.", "scope": "dataService", "scopeKind": "class"}, {"name": "logout()", "description": "Logs out the current user from backend or clears local session.", "scope": "dataService", "scopeKind": "class"}, {"name": "getCurrentUser()", "description": "Retrieves the current authenticated user's info and role.", "scope": "dataService", "scopeKind": "class"}, {"name": "listUnassignedRequests()", "description": "Lists open requests unassigned to any mechanic, for mechanic dashboard.", "scope": "dataService", "scopeKind": "class"}, {"name": "listMyAssignments(mechanicId)", "description": "Lists requests assigned to the current mechanic.", "scope": "dataService", "scopeKind": "class"}, {"name": "getRequestById(requestId)", "description": "Fetches a request by ID, including notes.", "scope": "dataService", "scopeKind": "class"}, {"name": "acceptRequest({ requestId, mechanic })", "description": "Assigns a request to the current mechanic and adds an acceptance note.", "scope": "dataService", "scopeKind": "class"}, {"name": "updateRequestStatus({ requestId, status, mechanic, noteText })", "description": "Updates a request's status (e.g., in progress, completed) with notes.", "scope": "dataService", "scopeKind": "class"}, {"name": "updateProfile({ userId, displayName, serviceArea })", "description": "Updates user profile information.", "scope": "dataService", "scopeKind": "class"}, {"name": "isSupabaseConfigured()", "description": "Checks if the necessary environment variables for Supabase are set.", "scope": "", "scopeKind": ""}, {"name": "clearLocalSession()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ensureSeedData()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "friendlySupabaseErrorMessage(err, fallback)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getLocalRequests()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getLocalSession()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getLocalUsers()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getSupabase()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getSupabaseEnv()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "insertRequestNote(supabase, { requestId, authorRole, noteText })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "isMissingColumnError(err)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "loadRequestNotes(supabase, requestId)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "normalizeContact(raw)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "normalizeRequestRow(r)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "normalizeVehicle(raw)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "readJson(key, fallback)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "requireSupabaseUser(supabase)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "setLocalRequests(reqs)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "setLocalSession(session)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "setLocalUsers(users)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "supaAtomicAcceptRequest(supabase, { requestId, mechanicId, assignedAtIso })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "supaAtomicCompleteRequest(supabase, { requestId, mechanicId, completedAtIso })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "supaAtomicStartRequest(supabase, { requestId, mechanicId })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "supaGetUserRole(supabase, userId, email)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "uid(prefix = \"id\")", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["createClient", "normalizeStatus", "readJson", "writeJson", "getSupabaseEnv", "requireSupabaseUser", "loadRequestNotes", "insertRequestNote", "normalizeVehicle", "normalizeContact", "normalizeRequestRow", "friendlySupabaseErrorMessage", "isMissingColumnError"], "search-terms": ["dataService", "mechanic registration", "request acceptance", "Supabase client", "local storage fallback", "request status updates", "mechanic portal", "request notes", "user roles", "request creation"], "state": 2, "file_id": 68, "knowledge_revision": 376, "git_revision": "3a4e8c5154a588f80fe6c6d23e82a73ba707436f", "revision_history": [{"336": "77e1d600e759976a19c575733df1357e8ce8f29f"}, {"350": "77e1d600e759976a19c575733df1357e8ce8f29f"}, {"357": "6d19f190024bbda968fc6edb334c17fb7b39068e"}, {"365": "b4c78ce7cad4925e1d4efe4f188ce4ad8741f1f2"}, {"370": "3a4e8c5154a588f80fe6c6d23e82a73ba707436f"}, {"376": "3a4e8c5154a588f80fe6c6d23e82a73ba707436f"}], "ctags": [{"_type": "tag", "name": "LS_KEYS", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^const LS_KEYS = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "acceptRequest", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async acceptRequest({ requestId, mechanic }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ requestId, mechanic })", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "assigned_at", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    assigned_at: assignedAtIso,$/", "language": "JavaScript", "kind": "property", "scope": "supaAtomicAcceptRequest.legacy", "scopeKind": "class"}, {"_type": "tag", "name": "assigned_at", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    assigned_at: assignedAtIso,$/", "language": "JavaScript", "kind": "property", "scope": "supaAtomicAcceptRequest.preferred", "scopeKind": "class"}, {"_type": "tag", "name": "assigned_mechanic_id", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    assigned_mechanic_id: mechanicId,$/", "language": "JavaScript", "kind": "property", "scope": "supaAtomicAcceptRequest.legacy", "scopeKind": "class"}, {"_type": "tag", "name": "at", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^          const fallbackNote = { id: uid(\"n\"), at: new Date().toISOString(), by: authedUser.emai/", "language": "JavaScript", "kind": "property", "scope": "dataService.updateRequestStatus.fallbackNote", "scopeKind": "class"}, {"_type": "tag", "name": "at", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^          const fallbackNote = { id: uid(\"n\"), at: noteAt, by: mechanicEmail || \"mechanic\", text/", "language": "JavaScript", "kind": "property", "scope": "dataService.acceptRequest.fallbackNote", "scopeKind": "class"}, {"_type": "tag", "name": "at", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^      at: new Date().toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "dataService.updateRequestStatus.note", "scopeKind": "class"}, {"_type": "tag", "name": "author_role", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    author_role: authorRole,$/", "language": "JavaScript", "kind": "property", "scope": "insertRequestNote.payload", "scopeKind": "class"}, {"_type": "tag", "name": "baseProfilePayload", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    const baseProfilePayload = {$/", "language": "JavaScript", "kind": "class", "scope": "dataService.registerMechanic", "scopeKind": "class"}, {"_type": "tag", "name": "by", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^          const fallbackNote = { id: uid(\"n\"), at: new Date().toISOString(), by: authedUser.emai/", "language": "JavaScript", "kind": "property", "scope": "dataService.updateRequestStatus.fallbackNote", "scopeKind": "class"}, {"_type": "tag", "name": "by", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^          const fallbackNote = { id: uid(\"n\"), at: noteAt, by: mechanicEmail || \"mechanic\", text/", "language": "JavaScript", "kind": "property", "scope": "dataService.acceptRequest.fallbackNote", "scopeKind": "class"}, {"_type": "tag", "name": "by", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^      by: mechanic.email,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.updateRequestStatus.note", "scopeKind": "class"}, {"_type": "tag", "name": "clearLocalSession", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function clearLocalSession() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "createRequest", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async createRequest({ user, vehicle, issueDescription, contact, address, latitude, longitude }/", "language": "JavaScript", "kind": "method", "signature": "({ user, vehicle, issueDescription, contact, address, latitude, longitude })", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^      createdAt: nowIso,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.request", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^        created_at: nowIso,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class"}, {"_type": "tag", "name": "dataService", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^export const dataService = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "display_name", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^        display_name: (displayName || \"\").trim(),$/", "language": "JavaScript", "kind": "property", "scope": "dataService.updateProfile.payload", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^        email,$/", "language": "JavaScript", "kind": "field", "scope": "dataService.registerMechanic.minimal", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^      email,$/", "language": "JavaScript", "kind": "field", "scope": "dataService.registerMechanic.baseProfilePayload", "scopeKind": "class"}, {"_type": "tag", "name": "ensureSeedData", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function ensureSeedData() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fallbackNote", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^          const fallbackNote = { id: uid(\"n\"), at: new Date().toISOString(), by: authedUser.emai/", "language": "JavaScript", "kind": "class", "scope": "dataService.updateRequestStatus", "scopeKind": "class"}, {"_type": "tag", "name": "fallbackNote", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^          const fallbackNote = { id: uid(\"n\"), at: noteAt, by: mechanicEmail || \"mechanic\", text/", "language": "JavaScript", "kind": "class", "scope": "dataService.acceptRequest", "scopeKind": "class"}, {"_type": "tag", "name": "fees", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  fees: \"rrqa.fees\",$/", "language": "JavaScript", "kind": "property", "scope": "LS_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "friendlySupabaseErrorMessage", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function friendlySupabaseErrorMessage(err, fallback) {$/", "language": "JavaScript", "kind": "function", "signature": "(err, fallback)"}, {"_type": "tag", "name": "getCurrentUser", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async getCurrentUser() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "getLocalRequests", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function getLocalRequests() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getLocalSession", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function getLocalSession() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getLocalUsers", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function getLocalUsers() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getRequestById", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async getRequestById(requestId) {$/", "language": "JavaScript", "kind": "method", "signature": "(requestId)", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "getSupabase", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function getSupabase() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getSupabaseEnv", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function getSupabaseEnv() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^          const fallbackNote = { id: uid(\"n\"), at: new Date().toISOString(), by: authedUser.emai/", "language": "JavaScript", "kind": "property", "scope": "dataService.updateRequestStatus.fallbackNote", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^          const fallbackNote = { id: uid(\"n\"), at: noteAt, by: mechanicEmail || \"mechanic\", text/", "language": "JavaScript", "kind": "property", "scope": "dataService.acceptRequest.fallbackNote", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^        id: uidToUse,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.registerMechanic.minimal", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^      id: uid(\"n\"),$/", "language": "JavaScript", "kind": "property", "scope": "dataService.updateRequestStatus.note", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^      id: uid(\"req\"),$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.request", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^      id: uidToUse,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.registerMechanic.baseProfilePayload", "scopeKind": "class"}, {"_type": "tag", "name": "insertPayload", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^      const insertPayload = {$/", "language": "JavaScript", "kind": "class", "scope": "dataService.createRequest", "scopeKind": "class"}, {"_type": "tag", "name": "insertRequestNote", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^async function insertRequestNote(supabase, { requestId, authorRole, noteText }) {$/", "language": "JavaScript", "kind": "function", "signature": "(supabase, { requestId, authorRole, noteText })"}, {"_type": "tag", "name": "isMissingColumnError", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function isMissingColumnError(err) {$/", "language": "JavaScript", "kind": "function", "signature": "(err)"}, {"_type": "tag", "name": "isSupabaseConfigured", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  isSupabaseConfigured,$/", "language": "JavaScript", "kind": "field", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "isSupabaseConfigured", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function isSupabaseConfigured() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "legacy", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  const legacy = {$/", "language": "JavaScript", "kind": "class", "scope": "supaAtomicAcceptRequest", "scopeKind": "class"}, {"_type": "tag", "name": "listMyAssignments", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async listMyAssignments(mechanicId) {$/", "language": "JavaScript", "kind": "method", "signature": "(mechanicId)", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "listUnassignedRequests", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async listUnassignedRequests() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "loadRequestNotes", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^async function loadRequestNotes(supabase, requestId) {$/", "language": "JavaScript", "kind": "function", "signature": "(supabase, requestId)"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async login(email, password) {$/", "language": "JavaScript", "kind": "method", "signature": "(email, password)", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "logout", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async logout() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "mechanic_id", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    mechanic_id: mechanicId,$/", "language": "JavaScript", "kind": "property", "scope": "supaAtomicAcceptRequest.preferred", "scopeKind": "class"}, {"_type": "tag", "name": "minimal", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^      const minimal = {$/", "language": "JavaScript", "kind": "class", "scope": "dataService.registerMechanic", "scopeKind": "class"}, {"_type": "tag", "name": "normalizeContact", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function normalizeContact(raw) {$/", "language": "JavaScript", "kind": "function", "signature": "(raw)"}, {"_type": "tag", "name": "normalizeRequestRow", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function normalizeRequestRow(r) {$/", "language": "JavaScript", "kind": "function", "signature": "(r)"}, {"_type": "tag", "name": "normalizeVehicle", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function normalizeVehicle(raw) {$/", "language": "JavaScript", "kind": "function", "signature": "(raw)"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    const note = {$/", "language": "JavaScript", "kind": "class", "scope": "dataService.updateRequestStatus", "scopeKind": "class"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    note: noteText,$/", "language": "JavaScript", "kind": "property", "scope": "insertRequestNote.payload", "scopeKind": "class"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^      const payload = {$/", "language": "JavaScript", "kind": "class", "scope": "dataService.updateProfile", "scopeKind": "class"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  const payload = {$/", "language": "JavaScript", "kind": "class", "scope": "insertRequestNote", "scopeKind": "class"}, {"_type": "tag", "name": "preferred", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  const preferred = {$/", "language": "JavaScript", "kind": "class", "scope": "supaAtomicAcceptRequest", "scopeKind": "class"}, {"_type": "tag", "name": "readJson", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function readJson(key, fallback) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, fallback)"}, {"_type": "tag", "name": "registerMechanic", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async registerMechanic({ name, email, password, phone, serviceType }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ name, email, password, phone, serviceType })", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "request", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    const request = {$/", "language": "JavaScript", "kind": "class", "scope": "dataService.createRequest", "scopeKind": "class"}, {"_type": "tag", "name": "request_id", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    request_id: requestId,$/", "language": "JavaScript", "kind": "property", "scope": "insertRequestNote.payload", "scopeKind": "class"}, {"_type": "tag", "name": "requests", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  requests: \"rrqa.requests\",$/", "language": "JavaScript", "kind": "property", "scope": "LS_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "requireSupabaseUser", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^async function requireSupabaseUser(supabase) {$/", "language": "JavaScript", "kind": "function", "signature": "(supabase)"}, {"_type": "tag", "name": "seeded", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  seeded: \"rrqa.seeded\",$/", "language": "JavaScript", "kind": "property", "scope": "LS_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "service_area", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^        service_area: (serviceArea || \"\").trim(),$/", "language": "JavaScript", "kind": "property", "scope": "dataService.updateProfile.payload", "scopeKind": "class"}, {"_type": "tag", "name": "session", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  session: \"rrqa.session\",$/", "language": "JavaScript", "kind": "property", "scope": "LS_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "setLocalRequests", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function setLocalRequests(reqs) {$/", "language": "JavaScript", "kind": "function", "signature": "(reqs)"}, {"_type": "tag", "name": "setLocalSession", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function setLocalSession(session) {$/", "language": "JavaScript", "kind": "function", "signature": "(session)"}, {"_type": "tag", "name": "setLocalUsers", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function setLocalUsers(users) {$/", "language": "JavaScript", "kind": "function", "signature": "(users)"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    status: \"ASSIGNED\",$/", "language": "JavaScript", "kind": "property", "scope": "supaAtomicAcceptRequest.legacy", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    status: \"assigned\",$/", "language": "JavaScript", "kind": "property", "scope": "supaAtomicAcceptRequest.preferred", "scopeKind": "class"}, {"_type": "tag", "name": "supaAtomicAcceptRequest", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^async function supaAtomicAcceptRequest(supabase, { requestId, mechanicId, assignedAtIso }) {$/", "language": "JavaScript", "kind": "function", "signature": "(supabase, { requestId, mechanicId, assignedAtIso })"}, {"_type": "tag", "name": "supaAtomicCompleteRequest", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^async function supaAtomicCompleteRequest(supabase, { requestId, mechanicId, completedAtIso }) {$/", "language": "JavaScript", "kind": "function", "signature": "(supabase, { requestId, mechanicId, completedAtIso })"}, {"_type": "tag", "name": "supaAtomicStartRequest", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^async function supaAtomicStartRequest(supabase, { requestId, mechanicId }) {$/", "language": "JavaScript", "kind": "function", "signature": "(supabase, { requestId, mechanicId })"}, {"_type": "tag", "name": "supaGetUserRole", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^async function supaGetUserRole(supabase, userId, email) {$/", "language": "JavaScript", "kind": "function", "signature": "(supabase, userId, email)"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^          const fallbackNote = { id: uid(\"n\"), at: new Date().toISOString(), by: authedUser.emai/", "language": "JavaScript", "kind": "property", "scope": "dataService.updateRequestStatus.fallbackNote", "scopeKind": "class"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^          const fallbackNote = { id: uid(\"n\"), at: noteAt, by: mechanicEmail || \"mechanic\", text/", "language": "JavaScript", "kind": "property", "scope": "dataService.acceptRequest.fallbackNote", "scopeKind": "class"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^      text: (noteText || \"\").trim() || `Status changed to ${canonical}.`,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.updateRequestStatus.note", "scopeKind": "class"}, {"_type": "tag", "name": "uid", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function uid(prefix = \"id\") {$/", "language": "JavaScript", "kind": "function", "signature": "(prefix = \"id\")"}, {"_type": "tag", "name": "updateProfile", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async updateProfile({ userId, displayName, serviceArea }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ userId, displayName, serviceArea })", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "updateRequestStatus", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async updateRequestStatus({ requestId, status, mechanic, noteText }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ requestId, status, mechanic, noteText })", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "userEmail", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^      userEmail: user.email,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.request", "scopeKind": "class"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^      userId: user.id,$/", "language": "JavaScript", "kind": "property", "scope": "dataService.createRequest.request", "scopeKind": "class"}], "hash": "3598c03246cb0b58157ffb387a1706ca", "format-version": 4, "code-base-name": "frontend_mechanic_portal", "filename": "frontend_mechanic_portal/src/services/dataService.js", "fields": [{"name": "assigned_at: assignedAtIso,", "scope": "supaAtomicAcceptRequest.legacy", "scopeKind": "class", "description": "unavailable"}, {"name": "assigned_mechanic_id: mechanicId,", "scope": "supaAtomicAcceptRequest.legacy", "scopeKind": "class", "description": "unavailable"}, {"name": "const fallbackNote = { id: uid(\"n\"), at: new Date().toISOString(), by: authedUser.emai/", "scope": "dataService.updateRequestStatus.fallbackNote", "scopeKind": "class", "description": "unavailable"}, {"name": "const fallbackNote = { id: uid(\"n\"), at: noteAt, by: mechanicEmail || \"mechanic\", text/", "scope": "dataService.acceptRequest.fallbackNote", "scopeKind": "class", "description": "unavailable"}, {"name": "at: new Date().toISOString(),", "scope": "dataService.updateRequestStatus.note", "scopeKind": "class", "description": "unavailable"}, {"name": "author_role: authorRole,", "scope": "insertRequestNote.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "by: mechanic.email,", "scope": "dataService.updateRequestStatus.note", "scopeKind": "class", "description": "unavailable"}, {"name": "createdAt: nowIso,", "scope": "dataService.createRequest.request", "scopeKind": "class", "description": "unavailable"}, {"name": "created_at: nowIso,", "scope": "dataService.createRequest.insertPayload", "scopeKind": "class", "description": "unavailable"}, {"name": "display_name: (displayName || \"\").trim(),", "scope": "dataService.updateProfile.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "email,", "scope": "dataService.registerMechanic.minimal", "scopeKind": "class", "description": "unavailable"}, {"name": "fees: \"rrqa.fees\",", "scope": "LS_KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "id: uidToUse,", "scope": "dataService.registerMechanic.minimal", "scopeKind": "class", "description": "unavailable"}, {"name": "id: uid(\"n\"),", "scope": "dataService.updateRequestStatus.note", "scopeKind": "class", "description": "unavailable"}, {"name": "id: uid(\"req\"),", "scope": "dataService.createRequest.request", "scopeKind": "class", "description": "unavailable"}, {"name": "isSupabaseConfigured,", "scope": "dataService", "scopeKind": "class", "description": "unavailable"}, {"name": "mechanic_id: mechanicId,", "scope": "supaAtomicAcceptRequest.preferred", "scopeKind": "class", "description": "unavailable"}, {"name": "note: noteText,", "scope": "insertRequestNote.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "request_id: requestId,", "scope": "insertRequestNote.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "requests: \"rrqa.requests\",", "scope": "LS_KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "seeded: \"rrqa.seeded\",", "scope": "LS_KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "service_area: (serviceArea || \"\").trim(),", "scope": "dataService.updateProfile.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "session: \"rrqa.session\",", "scope": "LS_KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "status: \"ASSIGNED\",", "scope": "supaAtomicAcceptRequest.legacy", "scopeKind": "class", "description": "unavailable"}, {"name": "status: \"assigned\",", "scope": "supaAtomicAcceptRequest.preferred", "scopeKind": "class", "description": "unavailable"}, {"name": "text: (noteText || \"\").trim() || `Status changed to ${canonical}.`,", "scope": "dataService.updateRequestStatus.note", "scopeKind": "class", "description": "unavailable"}, {"name": "userEmail: user.email,", "scope": "dataService.createRequest.request", "scopeKind": "class", "description": "unavailable"}, {"name": "userId: user.id,", "scope": "dataService.createRequest.request", "scopeKind": "class", "description": "unavailable"}]}
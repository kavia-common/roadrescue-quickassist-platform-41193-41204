{"is_source_file": true, "format": "JavaScript", "description": "This file defines a data service module for a frontend application that manages user sessions, requests, and integration with a backend (Supabase or local storage). It provides functions for authentication, request management, profile updates, and local storage handling.", "external_files": ["../theme"], "external_methods": ["isSupabaseConfigured", "createClient"], "published": ["dataService"], "classes": [], "methods": [{"name": "login(email, password)", "description": "Authenticates a user either via Supabase backend or local storage fallback.", "scope": "dataService", "scopeKind": "class"}, {"name": "logout()", "description": "Logs out the current user, clearing session information.", "scope": "dataService", "scopeKind": "class"}, {"name": "getCurrentUser()", "description": "Retrieves the current authenticated user's data.", "scope": "dataService", "scopeKind": "class"}, {"name": "listUnassignedRequests()", "description": "Lists all requests that are not yet assigned to a mechanic.", "scope": "dataService", "scopeKind": "class"}, {"name": "listMyAssignments(mechanicId)", "description": "Lists requests assigned to a specific mechanic.", "scope": "dataService", "scopeKind": "class"}, {"name": "getRequestById(requestId)", "description": "Fetches a specific request by its ID.", "scope": "dataService", "scopeKind": "class"}, {"name": "acceptRequest({ requestId, mechanic })", "description": "Mechanic accepts a request, updating assignment and notes.", "scope": "dataService", "scopeKind": "class"}, {"name": "updateRequestStatus({ requestId, status, mechanic, noteText })", "description": "Updates the status of a request, adding a note.", "scope": "dataService", "scopeKind": "class"}, {"name": "updateProfile({ userId, profile })", "description": "Updates a user's profile data.", "scope": "dataService", "scopeKind": "class"}, {"name": "clearLocalSession()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ensureSeedData()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getLocalRequests()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getLocalSession()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getLocalUsers()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getSupabase()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "readJson(key, fallback)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "setLocalRequests(reqs)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "setLocalSession(session)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "setLocalUsers(users)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "supaGetUserRole(supabase, userId, email)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "uid(prefix = \"id\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "writeJson(key, value)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["createClient", "isSupabaseConfigured", "getSupabase", "supabase.auth.signInWithPassword", "supabase.auth.getUser", "supabase.from", "supabase.auth.signOut", "supabase.from('profiles').select", "supabase.from('profiles').insert", "supabase.from('requests').select", "supabase.from('requests').update", "window.localStorage.getItem", "window.localStorage.setItem", "window.localStorage.removeItem"], "search-terms": ["dataService", "localStorage", "supabase", "requests", "mechanic", "session", "profile", "authorization", "user authentication"], "state": 2, "file_id": 20, "knowledge_revision": 52, "git_revision": "c72443e2d32b242e7ac01da395a68ca6e65042ef", "ctags": [{"_type": "tag", "name": "LS_KEYS", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^const LS_KEYS = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "acceptRequest", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async acceptRequest({ requestId, mechanic }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ requestId, mechanic })", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "at", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    const note = { id: uid(\"n\"), at: new Date().toISOString(), by: mechanic.email, text: \"Accept/", "language": "JavaScript", "kind": "property", "scope": "dataService.acceptRequest.note", "scopeKind": "class"}, {"_type": "tag", "name": "at", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    const note = { id: uid(\"n\"), at: new Date().toISOString(), by: mechanic.email, text: noteTex/", "language": "JavaScript", "kind": "property", "scope": "dataService.updateRequestStatus.note", "scopeKind": "class"}, {"_type": "tag", "name": "by", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    const note = { id: uid(\"n\"), at: new Date().toISOString(), by: mechanic.email, text: \"Accept/", "language": "JavaScript", "kind": "property", "scope": "dataService.acceptRequest.note", "scopeKind": "class"}, {"_type": "tag", "name": "by", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    const note = { id: uid(\"n\"), at: new Date().toISOString(), by: mechanic.email, text: noteTex/", "language": "JavaScript", "kind": "property", "scope": "dataService.updateRequestStatus.note", "scopeKind": "class"}, {"_type": "tag", "name": "clearLocalSession", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function clearLocalSession() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "dataService", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^export const dataService = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "ensureSeedData", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function ensureSeedData() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fees", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  fees: \"rrqa.fees\",$/", "language": "JavaScript", "kind": "property", "scope": "LS_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "getCurrentUser", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async getCurrentUser() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "getLocalRequests", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function getLocalRequests() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getLocalSession", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function getLocalSession() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getLocalUsers", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function getLocalUsers() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getRequestById", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async getRequestById(requestId) {$/", "language": "JavaScript", "kind": "method", "signature": "(requestId)", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "getSupabase", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function getSupabase() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    const note = { id: uid(\"n\"), at: new Date().toISOString(), by: mechanic.email, text: \"Accept/", "language": "JavaScript", "kind": "property", "scope": "dataService.acceptRequest.note", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    const note = { id: uid(\"n\"), at: new Date().toISOString(), by: mechanic.email, text: noteTex/", "language": "JavaScript", "kind": "property", "scope": "dataService.updateRequestStatus.note", "scopeKind": "class"}, {"_type": "tag", "name": "listMyAssignments", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async listMyAssignments(mechanicId) {$/", "language": "JavaScript", "kind": "method", "signature": "(mechanicId)", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "listUnassignedRequests", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async listUnassignedRequests() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async login(email, password) {$/", "language": "JavaScript", "kind": "method", "signature": "(email, password)", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "logout", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async logout() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    const note = { id: uid(\"n\"), at: new Date().toISOString(), by: mechanic.email, text: \"Accept/", "language": "JavaScript", "kind": "class", "scope": "dataService.acceptRequest", "scopeKind": "class"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    const note = { id: uid(\"n\"), at: new Date().toISOString(), by: mechanic.email, text: noteTex/", "language": "JavaScript", "kind": "class", "scope": "dataService.updateRequestStatus", "scopeKind": "class"}, {"_type": "tag", "name": "readJson", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function readJson(key, fallback) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, fallback)"}, {"_type": "tag", "name": "requests", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  requests: \"rrqa.requests\",$/", "language": "JavaScript", "kind": "property", "scope": "LS_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "seeded", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  seeded: \"rrqa.seeded\",$/", "language": "JavaScript", "kind": "property", "scope": "LS_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "session", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  session: \"rrqa.session\",$/", "language": "JavaScript", "kind": "property", "scope": "LS_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "setLocalRequests", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function setLocalRequests(reqs) {$/", "language": "JavaScript", "kind": "function", "signature": "(reqs)"}, {"_type": "tag", "name": "setLocalSession", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function setLocalSession(session) {$/", "language": "JavaScript", "kind": "function", "signature": "(session)"}, {"_type": "tag", "name": "setLocalUsers", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function setLocalUsers(users) {$/", "language": "JavaScript", "kind": "function", "signature": "(users)"}, {"_type": "tag", "name": "supaGetUserRole", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^async function supaGetUserRole(supabase, userId, email) {$/", "language": "JavaScript", "kind": "function", "signature": "(supabase, userId, email)"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    const note = { id: uid(\"n\"), at: new Date().toISOString(), by: mechanic.email, text: \"Accept/", "language": "JavaScript", "kind": "property", "scope": "dataService.acceptRequest.note", "scopeKind": "class"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^    const note = { id: uid(\"n\"), at: new Date().toISOString(), by: mechanic.email, text: noteTex/", "language": "JavaScript", "kind": "property", "scope": "dataService.updateRequestStatus.note", "scopeKind": "class"}, {"_type": "tag", "name": "uid", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function uid(prefix = \"id\") {$/", "language": "JavaScript", "kind": "function", "signature": "(prefix = \"id\")"}, {"_type": "tag", "name": "updateProfile", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async updateProfile({ userId, profile }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ userId, profile })", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "updateRequestStatus", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  async updateRequestStatus({ requestId, status, mechanic, noteText }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ requestId, status, mechanic, noteText })", "scope": "dataService", "scopeKind": "class"}, {"_type": "tag", "name": "users", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^  users: \"rrqa.users\",$/", "language": "JavaScript", "kind": "property", "scope": "LS_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "writeJson", "path": "/home/kavia/workspace/code-generation/roadrescue-quickassist-platform-41193-41204/frontend_mechanic_portal/src/services/dataService.js", "pattern": "/^function writeJson(key, value) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, value)"}], "hash": "d6a5e689602501b6c3c521c93ebd7dfa", "format-version": 4, "code-base-name": "frontend_mechanic_portal", "filename": "frontend_mechanic_portal/src/services/dataService.js", "fields": [{"name": "const note = { id: uid(\"n\"), at: new Date().toISOString(), by: mechanic.email, text: \"Accept/", "scope": "dataService.acceptRequest.note", "scopeKind": "class", "description": "unavailable"}, {"name": "const note = { id: uid(\"n\"), at: new Date().toISOString(), by: mechanic.email, text: noteTex/", "scope": "dataService.updateRequestStatus.note", "scopeKind": "class", "description": "unavailable"}, {"name": "fees: \"rrqa.fees\",", "scope": "LS_KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "requests: \"rrqa.requests\",", "scope": "LS_KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "seeded: \"rrqa.seeded\",", "scope": "LS_KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "session: \"rrqa.session\",", "scope": "LS_KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "users: \"rrqa.users\",", "scope": "LS_KEYS", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"52": "c72443e2d32b242e7ac01da395a68ca6e65042ef"}]}
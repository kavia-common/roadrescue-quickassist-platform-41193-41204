{"is_source_file": true, "format": "JavaScript", "description": "This file defines a data service module for a mechanic portal, handling user sessions, requests, and profile management with optional integration with Supabase backend.", "external_files": ["@supabase/supabase-js"], "external_methods": ["createClient", "supabase.from", "supabase.auth.signInWithPassword", "supabase.auth.getUser", "supabase.auth.signOut", "supabase.from('profiles').select", "supabase.from('profiles').insert", "supabase.from('profiles').update"], "published": ["dataService"], "classes": [], "methods": [{"name": "uid", "description": "Generates a unique identifier string with a specified prefix."}, {"name": "readJson", "description": "Reads and parses JSON data from local storage with fallback."}, {"name": "writeJson", "description": "Stringifies and writes JSON data to local storage."}, {"name": "ensureSeedData", "description": "Initializes mock seed data for users and requests if not already seeded."}, {"name": "getSupabaseEnv", "description": "Retrieves Supabase URL and key from environment variables."}, {"name": "isSupabaseConfigured", "description": "Checks if Supabase environment variables are set."}, {"name": "getSupabase", "description": "Creates and returns a Supabase client instance if configuration exists."}, {"name": "getLocalSession", "description": "Retrieves current session data from local storage."}, {"name": "setLocalSession", "description": "Stores session data in local storage."}, {"name": "clearLocalSession", "description": "Removes session data from local storage."}, {"name": "getLocalUsers", "description": "Retrieves user list from local storage."}, {"name": "setLocalUsers", "description": "Stores user list in local storage."}, {"name": "getLocalRequests", "description": "Retrieves request list from local storage."}, {"name": "setLocalRequests", "description": "Stores request list in local storage."}, {"name": "supaGetUserRole", "description": "Fetches or initializes user role and profile from Supabase 'profiles' table."}, {"name": "createRequest", "description": "Creates a new service request, either via Supabase or local mock data."}, {"name": "login", "description": "Authenticates user via Supabase or local data, sets session."}, {"name": "logout", "description": "Logs out user from Supabase or clears local session."}, {"name": "getCurrentUser", "description": "Retrieves current user info from Supabase or local storage."}, {"name": "listUnassignedRequests", "description": "Lists requests not assigned to any mechanic."}, {"name": "listMyAssignments", "description": "Lists requests assigned to a specific mechanic."}, {"name": "getRequestById", "description": "Retrieves a specific request by ID."}, {"name": "acceptRequest", "description": "Assigns a mechanic to a request and adds an acceptance note."}, {"name": "updateRequestStatus", "description": "Updates the status of a request and adds a note."}, {"name": "updateProfile", "description": "Updates user profile data in Supabase or local storage."}], "calls": ["createClient", "supabase.from", "supabase.auth.signInWithPassword", "supabase.auth.getUser", "supabase.auth.signOut", "supabase.from('profiles').select", "supabase.from('profiles').insert", "supabase.from('profiles').update"], "search-terms": ["dataService", "localStorage", "supabase", "requests", "mechanic", "portal", "session management", "seed data"], "state": 2, "file_id": 20, "knowledge_revision": 92, "git_revision": "fa0a1e8e7f94b5e6f4af66ec25c41c5e5cbed10a", "revision_history": [{"52": "c72443e2d32b242e7ac01da395a68ca6e65042ef"}, {"60": "ba92e41de31b999282ba6faeaca5de9d0d0cb61c"}, {"61": "ba92e41de31b999282ba6faeaca5de9d0d0cb61c"}, {"65": "fa0a1e8e7f94b5e6f4af66ec25c41c5e5cbed10a"}, {"92": "fa0a1e8e7f94b5e6f4af66ec25c41c5e5cbed10a"}], "ctags": [], "filename": "frontend_mechanic_portal/src/services/dataService.js", "format-version": 4, "code-base-name": "https://github.com/kavia-common/roadrescue-quickassist-platform-41193-41204.git:kavia-main"}
{"is_source_file": true, "format": "JavaScript", "description": "This file provides a data service module for a mechanic request management system, supporting both local storage and Supabase backend interactions. It includes functions for user authentication, request creation, assignment, status updates, profile management, and utility functions for handling vehicle and contact data normalization.", "external_files": ["@supabase/supabase-js", "./statusUtils"], "external_methods": ["createClient", "normalizeStatus"], "published": ["dataService"], "classes": [], "methods": [{"name": "createRequest", "description": "Creates a new mechanic request, either in Supabase or local storage, with vehicle and contact info."}, {"name": "login", "description": "Authenticates a user via Supabase or local credentials, returning user info and role."}, {"name": "logout", "description": "Logs out the current user from Supabase or clears local session."}, {"name": "getCurrentUser", "description": "Retrieves the current authenticated user info from Supabase or local storage."}, {"name": "listUnassignedRequests", "description": "Lists requests that are not yet assigned to a mechanic."}, {"name": "listMyAssignments", "description": "Lists requests assigned to a specific mechanic, via Supabase join or local data."}, {"name": "getRequestById", "description": "Fetches a specific request by ID from Supabase or local storage."}, {"name": "acceptRequest", "description": "Assigns a mechanic to a request, updating status and notes, via Supabase or local storage."}, {"name": "updateRequestStatus", "description": "Updates the status and notes of a request."}, {"name": "updateProfile", "description": "Updates user profile information in Supabase or local storage."}, {"name": "isSupabaseConfigured", "description": "Checks if Supabase environment variables are set, indicating backend availability."}], "calls": ["createClient", "normalizeStatus", "readJson", "writeJson", "getSupabaseEnv", "getSupabase", "requireSupabaseUser", "normalizeRequestRow", "normalizeVehicle", "normalizeContact", "getLocalSession", "setLocalSession", "clearLocalSession", "getLocalUsers", "setLocalUsers", "getLocalRequests", "setLocalRequests"], "search-terms": ["dataService", "mechanic request", "Supabase integration", "local storage", "request assignment", "vehicle normalization", "profile management", "request status update"], "state": 2, "file_id": 68, "knowledge_revision": 379, "git_revision": "77e1d600e759976a19c575733df1357e8ce8f29f", "revision_history": [{"336": "77e1d600e759976a19c575733df1357e8ce8f29f"}, {"379": "77e1d600e759976a19c575733df1357e8ce8f29f"}], "ctags": [], "filename": "frontend_mechanic_portal/src/services/dataService.js", "format-version": 4, "code-base-name": "https://github.com/kavia-common/roadrescue-quickassist-platform-41193-41204.git:kavia-main"}